<div id="advanceTaskDialog" data-form="advanceTaskDialog" class="relative z-10 w-full">

    <!-- No backdrop since it's not a modal anymore -->
    
    <!-- Dialog Container - now inline with no fixed positioning -->
    <div class="bg-white rounded-lg shadow-lg w-full mx-0 z-10">
      
      <!-- Close Button and Title -->
      <div class="p-4 border-b border-gray-200">
        <div class="flex items-center justify-between">
          <h3 class="text-xl font-semibold text-gray-900" data-form="title">Advance Task Step</h3>
          <button
            class="text-gray-500 hover:text-gray-700"
            data-action="close-dialog"
            aria-label="Close"
          >
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>
      </div>
  
      <!-- Main Content and Cards -->
      <div class="p-4 space-y-6">
        
        <!-- Step Cards and Advance Button -->
        <div class="flex flex-row items-center justify-center gap-4">
  
          <!-- Previous Step Card -->
          <div class="w-1/3 bg-gray-50 rounded-lg p-4 shadow-md border border-gray-200 relative" data-step='previous'>
            <div class="text-sm font-semibold text-gray-600 mb-2">Previous Step</div>
            <h4 class="text-lg font-bold" data-previous-title>Step 1: Introduction</h4>
            <p class="text-sm text-gray-500 mt-1" data-previous-description>
              Brief description of the previous task step.
            </p>
            <!-- Checkmark for previous step (always visible) -->
            <div class="absolute top-2 right-2 text-green-500">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2l4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
          </div>
  
          <!-- Current Step Card -->
          <div class="w-1/3 bg-blue-50 rounded-lg p-4 shadow-md border border-blue-200 relative" data-step='current'>
            <div class="text-sm font-semibold text-blue-600 mb-2">Current Step</div>
            <h4 class="text-lg font-bold" data-current-title>Step 2: Component Architecture</h4>
            <p class="text-sm text-gray-600 mt-1" data-current-description>
              Learn about component composition and state management patterns.
            </p>
            <!-- Student card inside the current step -->
            <div id="currentStudentName" data-student='name' class="absolute -top-3 -left-3 bg-white rounded-full p-1.5 text-xs font-medium text-gray-700 shadow border border-gray-200">
              Student: Jane Doe
            </div>
            <!-- Checkmark for current step (initially hidden) -->
            <div id="currentStepCheckmark" class="hidden absolute top-2 right-2 text-green-500">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2l4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
          </div>
  
          <!-- Advance/Reverse Button Container -->
          <div class="relative">
            <button id="advanceButton" class="advance-button" data-action="advance" aria-label="Advance task to next step" style="background-color: #3b82f6; color: white; transition: background-color 0.2s ease-in-out; border-radius: 9999px; padding: 0.5rem; box-shadow: 0 2px 3px rgba(0, 0, 0, 0.1); flex-shrink: 0;">
              <svg id="forwardArrow" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M13 5l7 7-7 7M5 12h14" />
              </svg>
              <svg id="backwardArrow" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M11 19l-7-7 7-7M19 12h-14" />
              </svg>
            </button>
          </div>
  
          <!-- Next Step Card -->
          <div class="w-1/3 bg-green-50 rounded-lg p-4 shadow-md border border-green-200 relative" data-step='next'>
            <div class="text-sm font-semibold text-green-600 mb-2">Next Step</div>
            <h4 class="text-lg font-bold" data-next-title>Step 3: State Management</h4>
            <p class="text-sm text-gray-600 mt-1" data-next-description>
              Implement state management solutions with React Context or Redux.
            </p>
            <!-- Student card inside the next step -->
            <div id="nextStudentName" data-student='name' class="hidden absolute -top-3 -right-3 bg-white rounded-full p-1.5 text-xs font-medium text-gray-700 shadow border border-gray-200">
              Student: Jane Doe
            </div>
          </div>
        </div>
  
        <!-- Action Buttons -->
        <div class="flex flex-col md:flex-row justify-center gap-3 pt-3 border-t border-gray-200">
          <button data-button='message-student' class="flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm">
            Message Student
          </button>
          <button data-button='abandoned' class="flex-1 py-2 px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 transition text-sm">
            Abandoned
          </button>
          <button data-button='message-admin' class="flex-1 py-2 px-4 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition text-sm">
            Message Admin
          </button>
        </div>
  
      </div>
    </div>
  </div>
  
  <style>
    .advance-button {
      background-color: #3b82f6;
      color: white;
      transition: background-color 0.2s ease-in-out;
      border-radius: 9999px;
      padding: 0.5rem;
      box-shadow: 0 2px 3px rgba(0, 0, 0, 0.1);
      flex-shrink: 0;
    }
    .advance-button:hover {
      background-color: #2563eb;
    }
  </style>


<!--
<button data-button='message-student' class="flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm">
    Message Student
  </button>
  <button data-button='abandoned' class="flex-1 py-2 px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 transition text-sm">
    Abandoned
  </button>
  <button data-button='message-admin'

  <div class="relative">
    <button id="advanceButton" class="advance-button" data-action="advance" aria-label="Advance task to next step" style="background-color: #3b82f6; color: white; transition: background-color 0.2s ease-in-out; border-radius: 9999px; padding: 0.5rem; box-shadow: 0 2px 3px rgba(0, 0, 0, 0.1); flex-shrink: 0;">
      <svg id="forwardArrow" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M13 5l7 7-7 7M5 12h14" />
      </svg>
      <svg id="backwardArrow" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M11 19l-7-7 7-7M19 12h-14" />
      </svg>
    </button>
-->
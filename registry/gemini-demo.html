<!DOCTYPE html>
<body>
<h1>Demo of database scripts</h1>

</body>

<script type="module">
//import {functionRegistry} from './function-registry'
//import{createSupabaseClient} from './supabase.js';
//import {executeIfPermitted} from './executeIfPermitted.js';
import {databaseCentral} from '../db/databaseCentral.js';


// --- DEMONSTRATION OF USAGE ---

//supabase = createSupabaseClient();

async function runDemo() { 
  try {
    // 1. Demonstrate an insert operation
   // const newRecord = await execute('insertTask', 'New Task from Demo', 'This is a task created by the registry.');
   // console.log('Result of insertTask:', newRecord);
//at this point we would only know userId and the data-action. 
    // example 
    const userId='87a90183-88b6-450a-94d2-7838ffbbf61b'; //real id that is in db but DEV only const.
    const action = 'readTaskWithSteps';
    const taskId =  '1a22f8ac-ccaf-4662-856d-3338784ed8da'     //newRecord.id;
 //we don't know anything else. No metaData no functionName    
    
//when would the relevant metadata be discovered? Not here surely.
    // 2. Demonstrate a read operation

    const taskData = await databaseCentral(userId, 'readTaskWithSteps', taskId);
    console.log('Result of readTaskWithSteps:', taskData);
}
catch(error){console.error('something went wrong', error)}
}

// Run the demonstration
runDemo();
</script>
</html>